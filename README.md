# TB常见问题Q&A

更新日期：2020-07-20



## 1 新手入门



##### Q：如何联系TB客服？

A：为了给客户提供更加优质的服务，TB为所有用户提供了一个统一的入口，客服机器人QQ： **2462365014**。软件的一般性问题，通过和这个客服聊天，就能找到解答。需要进一步的沟通，再选择加入其他客服群。



##### Q：如何开通TB实盘程序化交易？

A：开通TB实盘交易，有两种模式：

1. 线下渠道开户模式（以下简称：代收费模式）： 用户通过 TB 合作期货公司申请 TB 开户，详情可咨询账户所在期货公司。无论使用TB什么版本都可通过这种模式开通；
2. 线上自助开户模式（以下简称：预收费模式）： 如果一个交易账户之前没有通过代收费模式开户，则可通过 TBQuant，在『账户登录』中 点击【绑定账户】来进行预收模式开户，选择账户所在经纪公司，输入交易账号和密码， 点击【检查绑定】，检验交易账户密码能正常登录账户后，再进行输入手机号码，进行短信验证，验证通过后，点击【添加】 即完成开户。 开户完成后，用户登录<a href="http://shop.tbquant.net" target="_blank">TB商城</a>进行TB点充值后，即可开始使用TB实盘程序化交易。**<u>注意：这种模式只支持TBQuant，使用TB其他版本只能通过第一种方式开通。</u>**



##### Q：TBQuant软件提供了哪些学习资料？

A：TBQuant提供了学习文档和视频教程，供用户学习。

- 学习文档，访问链接：<a href="http://www.tbquant.net" target="_blank">http://www.tbquant.net</a></a>

  - **【<a href="http://www.tbquant.net/dist/index.html#/?navigate=&cid=516" target="_blank"> 量化学院 </a>】**详细介绍了软件的功能，并提供了丰富的使用案例
  - **【<a href="http://www.tbquant.net/fun.html" target="_blank"> 函数 </a>】**提供了TBQuant函数的说明文档和使用方法。

- 视频教程，TB提供了新手教程系列和TB腾讯课堂每周的视频直播回看

  - 新手视频教程：<a href="https://pan.baidu.com/s/1X2RLrWEa51l4oZie-d454w" target="_blank">https://pan.baidu.com/s/1X2RLrWEa51l4oZie-d454w</a> </a>   提取码: e8i8

  - 腾讯课堂视频：<a href="https://pan.baidu.com/s/1i5o9MyUVw_ftPHSHjfN8Bw" target="_blank">https://pan.baidu.com/s/1i5o9MyUVw_ftPHSHjfN8Bw</a></a>  提取码: jhw7

  - bilibili TBQuant量化交易腾讯课堂直播记录：<a href="https://www.bilibili.com/video/BV1M4411W7de/" target="_blank">https://www.bilibili.com/video/BV1M4411W7de/</a></a>

    

##### Q：TB软件账号各个版本、网站、商城通用吗？如果密码忘了怎么办？

A：TB软件账号在各个版本、网站、商城都是通用的，如果密码忘记，可以在官网的登录界面选择忘记密码，输入软件账号和注册时预留的手机号进行找回。如果忘记手机号，或者手机号已改变，或是早期注册客户未留手机号等可以通过qq向客服寻求手机号更新的帮助。



##### Q：如何修改TB软件账号密码？

A：强烈建议通过<a href="http://www.tb18.net" target="_blank">TB官网 </a>修改TB软件账号密码，在TB官网右上角点【登录】登录成功后，点击软件账户名，进入用户的主页，然后点击导航栏最右边的【帐号】->【设置】，然后点击左边的【帐号安全】，进入密码修改页面。



##### Q：如何申请模拟账号？

A：建议大家通过<a href="http://www.tb18.net" target="_blank">TB官网 </a>注册软件账号，正常情况下，软件账号注册成功后，系统会自动分配一个模拟账户，默认密码：123456。登录软件账号后，在账户登录中就可以看到该模拟账号。

如果系统没有分配模拟账号，请加TB客服群2（群号：757234945）联系TB客服申请。



##### Q：TB模拟账号的默认密码是多少?

A：默认密码：123456



##### Q：TB旗舰版和TBquant可以使用同一TB软件账户同时在线交易使用吗？可以同时开启自动交易吗？

A：可以同时在线，也可以同时开启自动交易。需要自己协调好各功能的使用，尤其要注意避免交易账户在不同客户端同时登录，不同客户端的交易信号之间的互相影响。正常情况下，不建议同时开启。



##### Q：交易通道是什么意思？登录交易账户时如何设置交易通道？

A：交易通道是指您的交易账户交易时所需要配置的经纪商的交易柜台、席位、交易前置机地址等信息。经纪商的交易柜台和席位，只要和TB有对接的，TB会提前为您配置好交易通道。交易前，用户应该对自己账户的相关信息进行了解，不清楚的可咨询经纪商。

使用TB软件，登录交易账户时，**要注意：使用TBQ和使用TB旗舰版或极速版，登录账户时的操作略有不同。**

- 如果使用旗舰版和极速版，您在开通TB时，需要在申请表注明交易通道，我们在开通时会帮您建立好交易账户和交易通道的绑定关系，登录账户时不再需要选择交易通道，最多是需要时选择一下交易通道的不同地址进行登录；

- 如果使用的是TBQ，则开通TB时，不需要进行交易通道的绑定，而是*<u>在第一次登录交易账户时，由用户自己选择账户实际的交易通道和地址进行登录，登录成功软件会保留设置</u>*，下次登录时就不用选择了。选择时，只要点击交易通道，会出来一个下拉框，选择您账户实际的交易通道即可。



##### Q：使用TBQuant软件，建议怎样重启软件？需要每天都重启吗？

A：交易账户每天两次的登出登录是必须的，您可以通过【系统设置】-> 【交易设置】-> 【全局默认设置】，设置定时任务来自动登录和登出。软件可以每天重启，但不是必须的。



##### Q：请问TBQuant高版本的公式可以导出，然后在低版本导入吗？

A：在TBQuant低版本上编写的公式，可以导出后在高版本中导入编译。但在TBQuant高版本上编写的公式，导出后很大可能无法在TBQuant低版本中导入使用（取决于版本的变化大小）。



##### Q：请问旗舰版或极速版的代码可以在TBQuant中使用吗？

A：TBQuant在语法上基本兼容TB旗舰版和极速版，老版本的代码只要导出为fbk文件，在TBQuant导入，导入时保持已经默认勾好的 ![](TB常见问题FAQ.assets/image-20200523215444107.png)不变，即可继续使用。

或在编辑公式时，把老版本代码复制粘贴进来后，选中代码，点击工具栏的![](TB常见问题FAQ.assets/image-20200523215943904.png)图标进行泛型替换，就可将原代码转换成TBQuant支持的代码。



##### Q：TBQuant支持直连行情吗？如果支持，如何使用？

A：TBQuant支持直连行情。登录TBQuant后，点击屏幕右下方最右边切换行情服务器图标![](TB常见问题FAQ.assets/image-20200523212134503.png) ，点击【添加自定义行情源】按钮，在弹出窗口中，按要求输入行情通道信息即可使用直连行情。



##### Q：是否可以使用TBQuant进行股票交易？有哪些合作券商？

A：TBQuant支持股票交易。目前合作券商有安信证券、第一创业证券（即将上线）等。



##### Q：TB可以看外盘行情吗？

A：您在直达国际开户后，TB旗舰版可使用直达提供的外盘行情



##### Q：TBQuant是否每次升级时都要重新编译公式？

A：只有在公式系统有升级时，才会在更新软件后需要全编译一下自定义的公式。选中、全编即可。



##### Q：为什么实盘委托单被废除后，交易助手没有重发委托？

A：交易助手只对未成交的已报状态的委托单进行撤单或再重发的动作。而委托单已被废除的，不在交易助手的执行范围内。



##### Q：交易帐户已登录成功，为何在CTP下单时提示没权限？

A：请与期货公司确认自己交易账户是哪个席位的，且在TB上登录交易账户时在通道一栏选择相同的席位通道方可。（另外，新开户当天也是不可以交易的，需等到第二天）。



##### Q：为何设置了交易助手的撤单再重发后，实际只有撤单并没有重发的动作？

A：请查看系统设置->交易设置->风险控制，检查“自动交易发单使用不成交即撤单指令（防止自成交）”是否被勾选上了。



##### Q：可以在TB手机移动端上运行并编写策略，回测，交易吗？

A：策略编写，回测，自动交易等只能在PC客户端上实现 。

TB移动端除了可以实现看盘、下单等基本操作，还可以与PC客户端同步连接，接收报警信息、查看帐户持仓，手工下单以及监控PC客户端程序化交易的匹配情况并同步交易等功能。



##### Q：如何获得TB移动端的授权码？

A：在TBQuant客户端右下角 -> 切换行情服务器 -> 设置授权码即可得到。



##### Q：设置好授权码后，为何移动端仍提示没有登录交易帐户？

A：请确保当前移动端登录所使用的软件账号与PC客户端登录的软件账号相同。



##### Q：TB极速版中，如果右下角的图标是这种状态![](TB常见问题FAQ.assets/image-20200603164836441.png)，是不是程序的开平仓信号就不执行了？

A：是的。点了这个按钮，就表示忽略所有程序化自动交易委托单，包含A_SendOrder函数下的单。



##### Q：为何360等软件会报TBquant里木马或是病毒？

A： 这是杀毒软件误报，添加信号或是白名单即可。



##### Q：如果在阿里云服务器使用TBQ，需要购买什么样的配置？

A：推荐2核8G或更高配置



## 2 使用问题



##### Q：TBQ在进行股票分析测试时，设置个股数为300时，提示订阅数超限怎么办？

A：TBQuant的注册用户可免费实时订阅200个合约，需要订阅更多合约时，可访问<a href="http://shop.tbquant.net" target="_blank">TB商城 </a>，在软件权限中购买【实时订阅量】商品来增加实时订阅合约数。



##### Q：TBQ目前版本只支持最多5万根Bar，如果是1分钟K线，连一年的数据都没有，怎么进行回测？

A：TBQuant对所有注册用户免费提供5万根Bar的历史数据，完全可以满足模型编写后检验策略逻辑的回测需求。如果需要更多的历史数据回测策略的历史业绩表现，用户可通过<a href="http://shop.tbquant.net" target="_blank">TB商城 </a>，在软件权限中购买【回测历史K线】商品来增加可使用的历史K线。对使用TBQuant进行实盘程序化交易的用户，TB会根据支付TB服务费的金额赠送5倍TB积分，TB积分可以在TB商城用来购买各种软件权限。



##### Q：TBQuant的交易委托记录在哪里查看？

A：软件右下角->消息中心，可看到部分委托记录、程序化交易以及帐户操作等相关信息。



##### Q：主力合约888的换月规则是什么?

A：按持仓量最大来确定主力合约，以持仓量大于原主力的1.1倍就换月。



##### Q：策略使用指数数据，映射到主力合约下单，为什么发单时，委托价格和主力合约实际价格相差很大？如何才能让委托单尽快成交？

A：使用指数映射主力合约或指定合约交易的，都需要设置委托偏移。以TBQ为例，可右键选择【策略单元设置】，勾选“委托偏移”，勾选“启用委托价为叫买/卖价偏移”，如希望委托单尽快成交，可增大偏移跳数。

![](TB常见问题FAQ.assets/image-20200523204944793.png)   



##### Q：TBQuant中如何不重启软件更新账户权限？

A：请按下图所示，依次点击【系统设置】-> 【权限信息】->【更新账户权限】即可刷新软件账户和软件账户下绑定的交易账户的权限。

![image-20200615215553389](TB常见问题FAQ.assets/image-20200615215553389.png) 



##### Q：请问预收费账户如何查看TB点使用详单？

A：您可以登录TB 商城，点击自己的软件账户名，进入【用户中心】，在【我的交易账户】找到预收费账户，点击右边的【账户明细】，然后在账户明细中点击【TB钱包】，就可以【TB点使用明细】中看到使用详单。

![image-20200615222423870](TB常见问题FAQ.assets/image-20200615222423870.png) 



##### Q：TBQ设置自动登录后，我想改回不自动登录，应如何处理？

A：您可以在自动登录后，在【系统设置】->【基本设置】->【常规设置】，将自动登录的勾选去掉。



##### Q：行情报价中的涨幅%与涨幅S%有何不同？

A：前者使用昨收价计算，后者使用昨结价计算的。



##### Q：TBQ工作区里如何切分多个图表？

A：TBQ不支持切分图表的操作方式，改由通过组件来定制自己的工作区。用户可根据自己喜好随意添加组件，拖拽到想要显示的位置，非常方便。一个工作区里可以添加多个不同模块的组件，比切分图表只支持图表要强大得多。



##### Q：为何工作区里一个图表合约修改后，其它图表的合约也会被修改了？

A：这是因为工作区添加的组件默认属于同一分组，而同一分组的组件是相互联动的。如果您不希望联动，可将不需要联动的图表设置为不同的联动分组即可。



##### Q：为何每次设置好忽略自动等设置后，重启软件，忽略自动设置上的勾选会消失？

A：TBQuant设计本就如此。在策略单元设置里，只有将相应的功能模块勾选上手，方可进行相应的设置。功能模块设置上没有勾选时，则不可以进行设置或修改。但交易是按当前已设置好的内容（灰色）来执行。



##### Q：为何888合约的价格与当前的主力合约价格不一样且差别很大？

A：检查是否设置了连续合约的后复权设置。



##### Q：TBQ如何在K线图中叠加更多的商品合约？

A：K线图表最多可显示4个图层，但是可通过鼠标右键菜单选【商品设置】，添加更多的商品合约。



##### Q：TBQ行情、帐户透视、策略单元等里面的分类信息都为空如何处理？

A：在行情报价中，右键菜单->分类设置里，添加分类信息，确定后其它模块即可显示分类信息。



##### Q： 当公式写入了过多的commentary函数，在图表注释框里显示不全怎么办？

A：在显示Commentary输出信息的K线上，点击鼠标右键，在弹出菜单中选择【锁定十字线】，然后鼠标移动到注释框，使用鼠标的滚轮，注释框内显示内容即可上下滚动显示。



##### Q：请问TBQ的监控器如何设置净头寸同步？

A：监控器中头寸是否匹配和交易设置有关。通过【系统设置】-> 【交易设置】-> 【风险控制】，可以对开平仓互转和净头寸交易进行设置，监控器判断头寸是否匹配的规则会根据设置的不同而有所变化。



##### Q：TBQ监控器中，为什么有的品种是开平互转，有的是多空单独？

A：监控器的头寸匹配规则是由【系统设置】-> 【交易设置】-> 【风险控制】的交易规则决定。普通状态为多空单独，开启日内开平互转(锁仓)状态为开平互转，开启净头寸交易状态为净头寸。



##### Q：为什么头寸监控器同步以后，只保持了净头寸是一致的？多空持仓是不一致的？

答：请到【系统设置】->【交易设置】->【风险控制】，查看一下该品种是否开启了净头寸交易或者开平互转。



##### Q：为什么我的策略中，明明是开仓信号，怎么实际交易变成了平仓？或我的策略中，明明是平仓信号，怎么实际交易变成了开仓？

答：请到【系统设置】->【交易设置】->【风险控制】，检查一下加载策略的品种是否开启了净头寸交易或者开平互转。



##### Q：为何收盘后不能设置定时优化？

A：定时优化功能是在盘中使用的。定时优化应用就是对策略交易单元的优化任务设置定时器，周期性的自动优化参数并应用。 比如设置了起始时点和执行周期，那么从起始时点开始每隔一个执行周期，都会触发一次自动优化并应用参数到交易单元。



##### Q：为何自定义合约导入数据时总是提示失败？

A：导入失败时，请查看相关的提示内容。。如文件名中是否有中文字符？文件名格式是否正确？（特别留意各交易所代码的正确且唯一性），文件名格式应该为：合约代码.交易所代码(周期)



##### Q：绘图工具在画好指定线型且保存工作区后，重启软件画好的线会消失？

A：划线后，右键菜单->生成指标后再保存工作区，即可。



##### Q：TBQuant的套利合约没有行情显示，是什么原因？

A：不是没有行情，交易活跃的套利合约是有行情的，显示的只是盘后数据。



##### Q：为何和其它软件相比，TB的分钟级别K线经常会有最高价和最低价的差异？

A：关于日内k线最高价最低价各个软件不一致的问题，任何一款行情软件都是在接收到的tick切片行情最新价的基础来生成各个周期k线，而TB的算法更加科学合理，日内K线数据也更准确。许多客户在仔细对比后都反馈了这个结果。



##### Q：TBQ怎么修改策略测试报告的初始资金？

A：鼠标右键点击【策略单元】->【策略单元设置】，勾选“公式交易设定”，输入初始资金确定即可。



##### Q：TB软件登录交易账户后，看不到持仓信息怎么办？

A：可尝试通过以下几步解决：

1、登出交易账户，再登入；

2、重启TB软件；

3、重启TB软件，进行数据重置（不同版本软件操作略有不同）后，再登录软件。



##### Q：图表加载公式以后，为什么图表上看不到交易信号？

A：原因可能有：

1. 公式里的交易条件本身就无法被满足，所以无法出现交易信号；
2. 设置的交易手数过大，或者图表虚拟资金过少，开仓资金不足；
3. 如果非加仓策略的测试报告里只有一笔交易，可能是平仓条件出错；
4. 股票品种单位为股，最少100股。



##### Q：怎么修改策略测试报告的初始资金？

A：鼠标右键点击策略单元->策略单元，勾选“公式交易设定”，输入初始资金确定即可。



##### Q：TB旗舰版进行回测时，在【公式应用设置】->【全局交易设置】中"默认数量”有“按固定合约数”、“按资金比例”、“按固定资金”选项。在TBQuant中在哪里设置？

A：TBQ已经取消该功能，可以在代码里编写。



##### Q：TBQuant的自定义行情中加入了自己的指标，为什么指标值不刷新？每次点击排序的时候才刷新排序？量化看盘里能自动刷新吗？

A：量化看盘是通过公式里的print2quote输出的，公式在运行量化看后盘就能更新。而自定义行情中加入的指标，是需要手动更新的。



##### Q：TBQuant的策略单元中显示的仓位信息和打开K线看到的信号不一致？

A：这个问题比较复杂，可能的原因有：

1. 信号闪烁
2. 用了样本量设置
3. 实时行情错误
4. 服务器修复了历史数据
5. 公式依赖了动态数据



##### Q：为什么TBQuant的基础数据大部分都没数据？

A：

1、TBQuant的基础数据需要到数据中心，先进行同步下载，然后才能查询到。

2、有些基础数据，只有主力合约有，而连续和指数是没有的。



##### Q：TBQuant如何进行一键全部平仓操作？ 

A：TBQuant中一键全平有多种方法：

1、在【持仓列表】组件中平仓：

- 某个合约平仓：持仓列表，右键选中合约持仓->一键全平->再选择“全部”、或“多头”、或”空头“进行平仓；
- 全部合约平仓：Ctrl+A全选或按住Shift鼠标点击全选，然后鼠标右键->一键全平->再选择“全部”、或“多头”、或”空头“进行平仓；

2、通过【账户调仓】平仓：

​      在【资金账户】组件，右键点击交易账户-> 调仓->选择【调仓至】 -> 在下面的输入框中，输入0，再点调仓下单即可将仓位调至0。



##### Q：TBQuant中模拟跑股票策略，为什么看到有开仓1手的信号，却没实际发单？

A：这很可能是策略中交易数量没有写对。为了让策略能支持对零股交易的处理，TBQuant中股票交易是以股为基本单位。所以，股票如果要交易1手，在交易策略中，指令的交易数量应该是100，而不是1。



##### Q：为什么TBQuant同一个策略单元加载两个以上的公式，为何信号和想像的不一样？

A：同一个策略单元里的公式是共享一套头寸的，不同的公式被当做多个条件指令来执行。这点与原来TB旗舰版和极速版的机制是不同的。请确认自己的交易需求后再决定公式是否需要分成不同的策略单元来执行。

如果希望策略之间互不影响，请将策略加载到不同的策略单元。



##### Q：为何每次设置好忽略自动等设置后，重启软件，忽略自动设置上的勾选会消失？

A：勾选的意思是本次需要修改这里的设置。在策略单元设置里，只有将相应的功能模块勾选上，方可进行相应的设置。功能模块设置上没有勾选时，则不可以进行设置或修改。但交易是按当前已设置好的内容（灰色）来执行。



##### Q：为何监控器不能设置启动自动同步功能？

A：使用自动同步功能，在某些极端情况下，如果完全无人值守，还是存在较大风险的，因此这个权限默认是没有开通的。用户必须完全知晓使用该功能可能带来的风险，并承诺自行承担可能存在的一切风险，才能开通权限。目前我们是要求绑定了实盘账户的软件账户才可以申请开通，有需要的用户可以按链接所示流程<a href="http://bbs.tb18.net/thread-238700-1-1.html" target="_blank">http://bbs.tb18.net/thread-238700-1-1.html </a>进行申请。



##### Q：策略单元的单元名有时候是绿色，有时候是橙色，是什么意思？

A：单元名的颜色代表策略单元各图层合约的交易状态：

1. 只要有一个图层的合约在当前BAR有信号，则显示为橙色；
2. 没有一个图层在当前BAR有信号，但在当天的某根BAR有图层有信号，则显示为绿色；
3. 非以上两种情况，则显示为黑色



##### Q：TBQuant如何让策略的指标输出显示在副图？

A：在公式管理器中选中策略，在右下角的【属性】中的【显示方式】中选择“子图”即可。



##### Q：TB极速版公式导出为XML有源码文件后在TBQuant中导入时报：不支持的文件格式，怎么处理？

A：这个问题后续版本已经修复，请下载更新版本。



##### Q：请问TBQuant为什么策略导入时间会有0001/01/01?

A：这个问题后续版本已经修复，请下载更新版本。



##### Q：TBQuant升级到1212版本后，FileAppend输出的txt文件怎么加上了.tbf后缀？怎么打开？

A：为满足国内期货交易所对授权信息商的合规要求，TBQuant新版本对FileAppend函数输出的文本文件改为加密输出，加密后的.tbf文件，无法直接通过记事本等文本编辑软件查看，只能通过TBQuant【数据中心】的【文件查看器】工具，选择加密文件才能打开。

![image-20200612002919722](TB常见问题FAQ.assets/image-20200612002919722.png)



##### Q：TBQuant升级到1212版本后，SetTBProfileString2File输出的文本文件怎么打开变成了乱码？

A：为满足国内期货交易所对授权信息商的合规要求，TBQuant新版本对SetTBProfileString2File函数输出的文本文件改为加密输出，加密后的文件，无法直接通过记事本等文本编辑软件查看，只能通过TBQuant【数据中心】的【本地数据库】选择加密文件浏览。

![image-20200612003820152](TB常见问题FAQ.assets/image-20200612003820152.png)



##### Q：为何k线图无法拼接到工作区内？

A：在报价组件里点击显示k线 ![image-20200619134713462](TB常见问题FAQ.assets/image-20200619134713462.png)  这个按钮弹出的窗口，是无法拼接到工作区内。您如果想在工作区中增加K线图，可以添加K线图组件，拖拽到工作区的合适位置。



##### Q：TBQuant的持仓列表中能读到原始的开仓均价吗？

A：TB目前采取的是逐日盯市的结算方式。每日结算完成后，会以当日的结算价做为新的持仓均价。后续版本，我们会增加对原始开仓均价的支持。



##### Q：TBQuant行情报价中，持仓资金是怎么计算的？

A：行情持仓资金=持仓量 X 最新价 X 每点价值 X 交易单位 X 交易所保证金率（即合约属性上的保证金比率）。



##### Q：历史回测，应该使用指数数据还是连续数据，那个更准确些？

A：在TBQ中使用连续数据加复权处理，测试结果更接近真实的交易结果。



##### Q：TBQ中我添加了多个k线图组件，然后我在其中一个K线图输入合约，为什么其他几个k线图都变成了同一个合约了？

A：在K线图的工具栏找到这个【联动分组】，进去后，点击『取消分组』即可。![image-20200703004942885](TB常见问题FAQ.assets/image-20200703004942885.png) 



##### Q：C盘的tblog文件夹是什么用途？占用了不少空间，能删除吗？有什么办法可以不生成这些文件吗？

A：这是当前TBquant的beta版的日志文件，便于排查问题的。如果当前内容多了，是可以删除的。后期会关闭此日志。





## 3 异常处理



##### Q：下载安装软件后，没法正常登录，正常进行公式编译？

A： 一般是操作系统原因，建议使用win10以上、非家庭版操作系统（绝大部分win7sp1或是家庭版的用户都没法正常使用软件）。



##### Q：TBQ登录报错：https连接失败：host not found:auth1.tradeblazer.net

A：DNS解析失败，检查客户端本地网络情况。



##### Q：TB旗舰版登录时报错：Network.cpp:798：ICE::DNSException:，是什么原因？

A：这个是您本地网络的DNS域名解析有问题，请检查客户端本地网络情况。



##### Q：TBQ登录报错：初始化除权换月信息失效，查询失败，Name不能为空，如何处理？

A：可能是旧版本bug，已建议升级版本再跟踪查看



##### Q：打开测试报告等内容时，提示当前页面的脚本发生错误，“which”为空或不是对象?

A：检查与确保当前操作系统里安装的浏览器是IE11以上的版本。



##### Q：TBPlus登录报错：前置机创建连接失败，请稍后再试！怎么解决？

A：请到TB客服群文件下载最新配置文件，更新到软件安装目录下。



##### Q：交易帐户登录时CTP提示不合法的登录？

A：有两种可能性，一个是密码错误，一个是柜台通道没选对。请与期货公司确认自己交易账号是哪个席位，并在账户登录的交易通道处选择相匹配的席位通道方可。详细操作请咨询期货公司客户经理。



##### Q：极速版重下新版本后，输账号密码后就卡在一直显示正在登陆中，没反应了，这是怎么回事？

A：请到TB客服群文件下载最新配置文件，更新到软件安装目录下。



##### Q：TBQuant为何升级后同一个公式在一台电脑上可正常编译，另一电脑上不能编译成功？

A：自动升级时，可能部分文件更新失败。可尝试将正常机器上的strategy文件夹copy到有问题机器覆盖即可解决。



##### Q：TBPlus登录时报错：数据中心连接失败，请稍后再试！怎么解决？

![](TB常见问题FAQ.assets/image-20200603160903106.png) 

 A：找到TBPlus安装目录的users文件夹下面您的软件账户名所在文件夹，找到XLDataCenter这个文件，先做好备份，然后删除试试。



##### Q：TB软件跳出提示：未处理请求超过许可数，是什么意思？

A：重启一下软件，如果是偶尔一下的提示，可忽略不理会。



##### Q：TB极速版公式导出为XML有源码文件后在TBQuant中导入时报：不支持的文件格式，怎么处理？

A：这个问题后续版本已经修复，请下载更新版本。



##### Q：为什么有些手机不能安装TBQuant移动版本？

A：目前运行环境需要安卓8.0以上版本



##### Q：为什么有的手机TB移动APP登录时会报：Failure>Chain validation failed错误？

![image-20200615213031987](TB常见问题FAQ.assets/image-20200615213031987.png) 

A：这是因为您的手机的安卓系统版本太低了，目前运行环境要求安卓8.0以上版本。



##### Q：旗舰版的持仓怎么会有一些商品名称为空，均价、现价等都为0的持仓？应该怎么处理？

A：这是因为您的持仓里有可组成交易所套利组合的持仓，交易所就生成了一个套利合约的显示，而旗舰版是没有这个套利合约的字段的，于是显示为空了。这不影响交易，如果不想显示，就升级到新版本V5621，新版本中过滤了这个显示。



##### Q：为什么最近TBQuant新版本加载系统内置的策略都会失败呢？

A：这是一个Bug，后续版本已经修复。在升级版本前，可以自己新建一个公式，把系统内置策略复制粘贴进来再编译，就可以使用了。





## 4 公式语法



##### Q：MarketPosition是指净持仓吗？对锁的单子MarketPosition是等于零吗？

A：MarketPosition是单个TB策略产生的图表信号的持仓状态函数，它的状态只有持多、持空或没有仓位三种。

而TB中能产生图表信号的Buy/Sell交易函数是不支持对锁的，即Buy函数会先把空头信号平仓后再开多头仓位，SellShort函数也是类似，所以，对单个策略来说，它的MarketPosition只能是上述三种状态之一，因此也就不存在净持仓的说法。

而交易账户的实际持仓是有可能是锁仓状态的，因为不同的策略可能有不同的持仓状态。



##### Q：A_TodayBuyPosition 是显示当前持仓里有的有多少今天开仓的 还是今天总共有多少开仓（无论是否平掉）?

A：显示的是当前持仓里有多少是今天开仓的，因为A_TodayBuyPosition返回的是当前公式应用的帐户下当前商品的当日买入净持仓。比如：今天买入开仓5手，卖出平今2手，则A_TodayBuyPosition的值是3手。需要注意的是，如果平仓是平昨仓，对A_TodayBuyPosition的值就没有影响。这个函数只对上期所和上期能源中心这两个支持平今指令的交易所品种有意义。



##### Q：我的策略在TBQuant中报CallAuctionFilter函数没有申明，如何处理？

A：这是因为TBQuant内置函数中不再提供这个函数的原因。CallAuctionFilter是TB旗舰版和极速版中系统内置的集合竞价过滤函数，而TBQuant在系统底层增加了集合竞价过滤的支持，因此策略中不再需要对集合竞价进行特殊处理，公式中直接把相关代码删除即可。








